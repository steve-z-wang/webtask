{
  "request": {
    "system": "## Who You Are\nYou are a strategic manager that oversees task completion by delegating subtasks and determining when the entire task is done.\n\n## How to Plan\n1. Review subtask queue and verifier feedback\n2. Check if task goal is fully satisfied\n3. If task is completed, use complete_task tool\n4. Otherwise, decide next subtask to start\n\n## Q&A\n**When should you complete the task?**\nUse complete_task when ALL requirements of the task goal are satisfied. Review the verifier feedback to confirm all subtasks succeeded.\n\n**When should you abort the task?**\nUse abort_task when the task cannot be completed due to conditions beyond control: website unavailable, required item doesn't exist, missing authentication, permanent errors (404, 403), or impossible prerequisites. Don't abort for temporary issues that can be retried.\n\n**What should subtask goals focus on?**\nFocus on WHAT needs to happen, not HOW. Define clear, verifiable goals that the Worker can understand and the Verifier can check.\n\n**How many subtasks should you plan at once?**\nYou can plan MULTIPLE subtasks when the steps are clear and independent. Use add_subtask for each subtask, then call start_subtask to begin execution. This is more efficient than planning one at a time.\n\n**When should you cancel pending subtasks?**\nUse cancel_pending_subtasks when you see REQUESTED_RESCHEDULE feedback that invalidates your current plan. Then create a new plan with add_subtask.\n\n**What makes a good subtask goal?**\nGoals should be specific, achievable, and verifiable. Example: 'Add 2 screws to cart' is better than 'Get screws'.\n\n## Response Format\nRespond with JSON containing three parts:\n- observation: ONLY what you see (subtask queue state, verifier feedback). Do NOT include your plan.\n- thinking: Your reasoning and planning - what subtasks to create and why\n- tool_calls: Actions to take (each has description, tool, parameters)\n\nExample: {\"observation\": \"No subtasks yet\", \"thinking\": \"Need to add 3 items to cart\", \"tool_calls\": [{\"description\": \"Add subtask for screws\", \"tool\": \"add_subtask\", \"parameters\": {\"goal\": \"Add 2 screws to cart\"}}, {\"description\": \"Add subtask for nails\", \"tool\": \"add_subtask\", \"parameters\": {\"goal\": \"Add 1 box of nails to cart\"}}, {\"description\": \"Start executing subtasks\", \"tool\": \"start_subtask\", \"parameters\": {}}]}",
    "content": [
      {
        "type": "text",
        "data": {
          "text": "## Task Goal\n\nadd 2 Flat-Head Wood Screws and 5 cross-head screws to the cart, and proceed to the cart"
        }
      },
      {
        "type": "text",
        "data": {
          "text": "## Available Tools\n\n{\n  \"tool_call_structure\": {\n    \"description\": \"Tool call request from LLM (proposal phase).\\n\\nThis is what the LLM returns - pure JSON-serializable data for validation.\",\n    \"properties\": {\n      \"description\": {\n        \"description\": \"Past-tense description of what this action does (e.g., 'Clicked the cart icon', 'Filled quantity field with 2')\",\n        \"type\": \"string\"\n      },\n      \"tool\": {\n        \"description\": \"Tool name to execute\",\n        \"type\": \"string\"\n      },\n      \"parameters\": {\n        \"additionalProperties\": true,\n        \"description\": \"Tool-specific parameters\",\n        \"type\": \"object\"\n      }\n    },\n    \"required\": [\n      \"description\",\n      \"tool\"\n    ],\n    \"type\": \"object\"\n  },\n  \"available_tools\": [\n    {\n      \"tool\": \"add_subtask\",\n      \"description\": \"Add a new subtask to the pending queue with the given goal\",\n      \"parameters\": {\n        \"goal\": {\n          \"description\": \"Subtask goal to achieve\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"goal\"\n      ]\n    },\n    {\n      \"tool\": \"cancel_pending_subtasks\",\n      \"description\": \"Cancel all pending subtasks in the queue and mark them as cancelled\",\n      \"parameters\": {},\n      \"required\": []\n    },\n    {\n      \"tool\": \"start_subtask\",\n      \"description\": \"Signal that the pending subtask queue is ready for execution\",\n      \"parameters\": {},\n      \"required\": []\n    },\n    {\n      \"tool\": \"complete_task\",\n      \"description\": \"Signal that the entire task has been completed and all requirements have been met\",\n      \"parameters\": {\n        \"details\": {\n          \"description\": \"Summary of what was accomplished and why the task is completed\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"details\"\n      ]\n    },\n    {\n      \"tool\": \"abort_task\",\n      \"description\": \"Signal that the entire task has been aborted due to conditions beyond control (e.g., website unavailable, item doesn't exist, missing required authentication)\",\n      \"parameters\": {\n        \"reason\": {\n          \"description\": \"Explanation of why the task cannot be completed and what blocked it\",\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"reason\"\n      ]\n    }\n  ]\n}"
        }
      },
      {
        "type": "text",
        "data": {
          "text": "## Subtask Queue\n\n0. [COMPLETE] Add 2 Flat-Head Wood Screws to the cart\n     Feedback: Successfully added 2 Flat-Head Wood Screws to the cart. The cart icon shows 2 items and a confirmation message was displayed.\n  1. [COMPLETE] Add 5 cross-head screws to the cart\n     Feedback: Successfully added 5 cross-head screws to the cart. Cart now shows 7 items.\n\u2192 2. [COMPLETE] Proceed to the cart"
        }
      },
      {
        "type": "text",
        "data": {
          "text": "## Last Verifier Decision\n\n[SUCCESS] Subtask completed successfully, as the cart page is loaded and displays the correct items."
        }
      }
    ],
    "use_json": true
  },
  "response": "{\n  \"observation\": \"Subtask 0 'Add 2 Flat-Head Wood Screws to the cart' is COMPLETE with feedback: 'Successfully added 2 Flat-Head Wood Screws to the cart. The cart icon shows 2 items and a confirmation message was displayed.'. Subtask 1 'Add 5 cross-head screws to the cart' is COMPLETE with feedback: 'Successfully added 5 cross-head screws to the cart. Cart now shows 7 items.'. Subtask 2 'Proceed to the cart' is COMPLETE with verifier decision: '[SUCCESS] Subtask completed successfully, as the cart page is loaded and displays the correct items.'.\",\n  \"thinking\": \"All subtasks in the queue are complete, and the verifier feedback confirms that '2 Flat-Head Wood Screws' and '5 cross-head screws' have been added to the cart, and the task has proceeded to the cart. This fully satisfies the task goal. Therefore, I should complete the task.\",\n  \"tool_calls\": [\n    {\n      \"description\": \"Signal that the entire task has been completed.\",\n      \"tool\": \"complete_task\",\n      \"parameters\": {\n        \"details\": \"Successfully added 2 Flat-Head Wood Screws and 5 cross-head screws to the cart, and then proceeded to the cart page as confirmed by the verifier. All requirements of the task goal are satisfied.\"\n      }\n    }\n  ]\n}"
}