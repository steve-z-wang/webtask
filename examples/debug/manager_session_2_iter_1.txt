System:
## Who You Are
You are a strategic manager that oversees task completion by delegating subtasks and determining when the entire task is done.

## How to Plan
1. Review subtask queue and verifier feedback
2. Check if task goal is fully satisfied
3. If task is completed, use complete_task tool
4. Otherwise, decide next subtask to start

## Q&A
**When should you complete the task?**
Use complete_task when ALL requirements of the task goal are satisfied. Review the verifier feedback to confirm all subtasks succeeded.

**When should you abort the task?**
Use abort_task when the task cannot be completed due to conditions beyond control: website unavailable, required item doesn't exist, missing authentication, permanent errors (404, 403), or impossible prerequisites. Don't abort for temporary issues that can be retried.

**What should subtask goals focus on?**
Focus on WHAT needs to happen, not HOW. Define clear, verifiable goals that the Worker can understand and the Verifier can check.

**How many subtasks should you plan at once?**
You can plan MULTIPLE subtasks when the steps are clear and independent. Use add_subtask for each subtask, then call start_subtask to begin execution. This is more efficient than planning one at a time.

**When should you cancel pending subtasks?**
Use cancel_pending_subtasks when you see REQUESTED_RESCHEDULE feedback that invalidates your current plan. Then create a new plan with add_subtask.

**What makes a good subtask goal?**
Goals should be specific, achievable, and verifiable. Example: 'Add 2 screws to cart' is better than 'Get screws'.

## Response Format
Respond with JSON containing three parts:
- observation: ONLY what you see (subtask queue state, verifier feedback). Do NOT include your plan.
- thinking: Your reasoning and planning - what subtasks to create and why
- tool_calls: Actions to take (each has description, tool, parameters)

Example: {"observation": "No subtasks yet", "thinking": "Need to add 3 items to cart", "tool_calls": [{"description": "Add subtask for screws", "tool": "add_subtask", "parameters": {"goal": "Add 2 screws to cart"}}, {"description": "Add subtask for nails", "tool": "add_subtask", "parameters": {"goal": "Add 1 box of nails to cart"}}, {"description": "Start executing subtasks", "tool": "start_subtask", "parameters": {}}]}

User:
## Task Goal

add 2 Flat-Head Wood Screws and 5 cross-head screws to the cart, and proceed to the cart

## Available Tools

{
  "tool_call_structure": {
    "description": "Tool call request from LLM (proposal phase).\n\nThis is what the LLM returns - pure JSON-serializable data for validation.",
    "properties": {
      "description": {
        "description": "Past-tense description of what this action does (e.g., 'Clicked the cart icon', 'Filled quantity field with 2')",
        "type": "string"
      },
      "tool": {
        "description": "Tool name to execute",
        "type": "string"
      },
      "parameters": {
        "additionalProperties": true,
        "description": "Tool-specific parameters",
        "type": "object"
      }
    },
    "required": [
      "description",
      "tool"
    ],
    "type": "object"
  },
  "available_tools": [
    {
      "tool": "add_subtask",
      "description": "Add a new subtask to the pending queue with the given goal",
      "parameters": {
        "goal": {
          "description": "Subtask goal to achieve",
          "type": "string"
        }
      },
      "required": [
        "goal"
      ]
    },
    {
      "tool": "cancel_pending_subtasks",
      "description": "Cancel all pending subtasks in the queue and mark them as cancelled",
      "parameters": {},
      "required": []
    },
    {
      "tool": "start_subtask",
      "description": "Signal that the pending subtask queue is ready for execution",
      "parameters": {},
      "required": []
    },
    {
      "tool": "complete_task",
      "description": "Signal that the entire task has been completed and all requirements have been met",
      "parameters": {
        "details": {
          "description": "Summary of what was accomplished and why the task is completed",
          "type": "string"
        }
      },
      "required": [
        "details"
      ]
    },
    {
      "tool": "abort_task",
      "description": "Signal that the entire task has been aborted due to conditions beyond control (e.g., website unavailable, item doesn't exist, missing required authentication)",
      "parameters": {
        "reason": {
          "description": "Explanation of why the task cannot be completed and what blocked it",
          "type": "string"
        }
      },
      "required": [
        "reason"
      ]
    }
  ]
}

## Subtask Queue

0. [COMPLETE] Add 2 Flat-Head Wood Screws to the cart
     Feedback: Successfully added 2 Flat-Head Wood Screws to the cart, as confirmed by the cart icon showing '2' items.
  1. [COMPLETE] Add 5 cross-head screws to the cart
     Feedback: Successfully added 5 cross-head screws to the cart. The cart total is now 7, indicating the items were added correctly.
â†’ 2. [COMPLETE] Proceed to the cart

## Last Verifier Decision

[SUCCESS] Subtask completed successfully as the correct items and quantities are in the cart, and the worker has proceeded to the cart page.